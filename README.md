# Sysadmin
Scripts for system administration, mostly Mac.

**Spectre-Meltdown-status.sh** is a Casper/Jamf Pro extension attribute to show the Meltdown/Spectre patch status of macOS, Safari, Firefox, and Chrome. It will return, for example, "OS Patched, Safari Patched, Firefox Mainline Vulnerable, Chrome Vulnerable". It looks in /Applications for the presence of Firefox and Chrome, and checks whether Firefox is ESR (Extended Support Release) or mainline, comparing the version numbers with the patched versions.

**BuildMacInstallers.sh** is a shell script to automate creation of dual-booting USB sticks with both the Sierra and High Sierra installers. It takes either a device name (/dev/diskN) or volume name (/Volumes/something), then partitions the drive with `diskutil`, runs the `createinstallmedia` command, renames the created volumes, applies pretty icons to them using Cocoa APIs via Python, and properly blesses them so they look right in the EFI bootloader on Macs.

**DetectRootVulnerability.sh** is a Casper/Jamf Pro extension attribute to track which machines are vulnerable to or have been exploited by the bug in early versions of High Sierra that allowed root access with a blank password (see [ArsTechnica's article](https://arstechnica.com/information-technology/2017/11/macos-bug-lets-you-log-in-as-admin-with-no-password-required/) for details). It first checks if the OS is an affected version, then checks if the root password has been set; if it has, it checks whether it has been set to a blank password or something else using `osascript`' Based on these tests, it will return one of 'Not affected', 'Patched', 'Vulnerable', 'Exploited', or 'Secure'. Exploited means that someone has already used the vulnerability to gain root access on the system at least once.
